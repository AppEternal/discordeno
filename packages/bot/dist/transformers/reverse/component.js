import { MessageComponentTypes } from '@discordeno/types';
export function transformComponentToDiscordComponent(bot, payload) {
    // This switch should include all cases
    switch(payload.type){
        case MessageComponentTypes.ActionRow:
            return transformActionRow(bot, payload);
        case MessageComponentTypes.Button:
            return transformButtonComponent(bot, payload);
        case MessageComponentTypes.Container:
            return transformContainerComponent(bot, payload);
        case MessageComponentTypes.TextInput:
            return transformInputTextComponent(bot, payload);
        case MessageComponentTypes.StringSelect:
        case MessageComponentTypes.ChannelSelect:
        case MessageComponentTypes.RoleSelect:
        case MessageComponentTypes.UserSelect:
        case MessageComponentTypes.MentionableSelect:
            return transformSelectMenuComponent(bot, payload);
        case MessageComponentTypes.Section:
            return transformSectionComponent(bot, payload);
        case MessageComponentTypes.File:
            return transformFileComponent(bot, payload);
        case MessageComponentTypes.MediaGallery:
            return transformMediaGalleryComponent(bot, payload);
        case MessageComponentTypes.Thumbnail:
            return transformThumbnailComponent(bot, payload);
        case MessageComponentTypes.Separator:
        case MessageComponentTypes.TextDisplay:
            // As of now they are compatible
            return payload;
    }
}
export function transformUnfurledMediaItemToDiscordUnfurledMediaItem(bot, payload) {
    return {
        url: payload.url,
        proxy_url: payload.proxyUrl,
        height: payload.height,
        width: payload.width,
        content_type: payload.contentType,
        attachment_id: payload.attachmentId ? bot.transformers.reverse.snowflake(payload.attachmentId) : undefined
    };
}
export function transformMediaGalleryItemToDiscordMediaGalleryItem(bot, payload) {
    return {
        media: bot.transformers.reverse.unfurledMediaItem(bot, payload.media),
        description: payload.description,
        spoiler: payload.spoiler
    };
}
function transformActionRow(bot, payload) {
    return {
        type: MessageComponentTypes.ActionRow,
        id: payload.id,
        // The actionRow.components type is kinda annoying, so we need a cast for this
        components: payload.components?.map((component)=>bot.transformers.reverse.component(bot, component)) ?? []
    };
}
function transformContainerComponent(bot, payload) {
    return {
        type: MessageComponentTypes.Container,
        id: payload.id,
        accent_color: payload.accentColor,
        spoiler: payload.spoiler,
        components: payload.components?.map((component)=>bot.transformers.reverse.component(bot, component)) ?? []
    };
}
function transformButtonComponent(bot, payload) {
    // Since Component is a merge of all components, some casts are necessary
    return {
        type: MessageComponentTypes.Button,
        id: payload.id,
        style: payload.style,
        custom_id: payload.customId,
        disabled: payload.disabled,
        emoji: payload.emoji ? {
            id: payload.emoji.id ? bot.transformers.reverse.snowflake(payload.emoji.id) : null,
            name: payload.emoji.name ?? null,
            animated: payload.emoji.animated
        } : undefined,
        label: payload.label,
        url: payload.url,
        sku_id: payload.skuId ? bot.transformers.reverse.snowflake(payload.skuId) : undefined
    };
}
function transformInputTextComponent(_bot, payload) {
    // Since Component is a merge of all components, some casts are necessary
    return {
        type: MessageComponentTypes.TextInput,
        id: payload.id,
        style: payload.style,
        custom_id: payload.customId,
        label: payload.label,
        value: payload.value,
        max_length: payload.maxLength,
        min_length: payload.minLength,
        placeholder: payload.placeholder,
        required: payload.required
    };
}
function transformSelectMenuComponent(bot, payload) {
    return {
        type: payload.type,
        id: payload.id,
        custom_id: payload.customId,
        channel_types: payload.channelTypes,
        default_values: payload.defaultValues?.map((defaultValue)=>({
                id: bot.transformers.reverse.snowflake(defaultValue.id),
                type: defaultValue.type
            })),
        disabled: payload.disabled,
        max_values: payload.maxValues,
        min_values: payload.minValues,
        options: payload.options?.map((option)=>({
                label: option.label,
                value: option.value,
                description: option.description,
                emoji: option.emoji ? {
                    id: option.emoji.id ? bot.transformers.reverse.snowflake(option.emoji.id) : null,
                    name: option.emoji.name ?? null,
                    animated: option.emoji.animated
                } : undefined,
                default: option.default
            })),
        placeholder: payload.placeholder
    };
}
function transformSectionComponent(bot, payload) {
    return {
        type: MessageComponentTypes.Section,
        id: payload.id,
        components: payload.components?.map((component)=>bot.transformers.reverse.component(bot, component)),
        accessory: payload.accessory ? bot.transformers.reverse.component(bot, payload.accessory) : undefined
    };
}
function transformFileComponent(bot, payload) {
    return {
        type: MessageComponentTypes.File,
        id: payload.id,
        file: bot.transformers.reverse.unfurledMediaItem(bot, payload.file),
        spoiler: payload.spoiler,
        name: payload.name,
        size: payload.size
    };
}
function transformMediaGalleryComponent(bot, payload) {
    return {
        type: MessageComponentTypes.MediaGallery,
        id: payload.id,
        items: payload.items?.map((item)=>bot.transformers.reverse.mediaGalleryItem(bot, item)) ?? []
    };
}
function transformThumbnailComponent(bot, payload) {
    return {
        type: MessageComponentTypes.Thumbnail,
        id: payload.id,
        media: bot.transformers.reverse.unfurledMediaItem(bot, payload.media),
        description: payload.description,
        spoiler: payload.spoiler
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvcmV2ZXJzZS9jb21wb25lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdHlwZSBCdXR0b25TdHlsZXMsXG4gIHR5cGUgRGlzY29yZEFjdGlvblJvdyxcbiAgdHlwZSBEaXNjb3JkQnV0dG9uQ29tcG9uZW50LFxuICB0eXBlIERpc2NvcmRDb250YWluZXJDb21wb25lbnQsXG4gIHR5cGUgRGlzY29yZEZpbGVDb21wb25lbnQsXG4gIHR5cGUgRGlzY29yZE1lZGlhR2FsbGVyeUNvbXBvbmVudCxcbiAgdHlwZSBEaXNjb3JkTWVkaWFHYWxsZXJ5SXRlbSxcbiAgdHlwZSBEaXNjb3JkTWVzc2FnZUNvbXBvbmVudCxcbiAgdHlwZSBEaXNjb3JkU2VjdGlvbkNvbXBvbmVudCxcbiAgdHlwZSBEaXNjb3JkU2VsZWN0TWVudUNvbXBvbmVudCxcbiAgdHlwZSBEaXNjb3JkVGV4dERpc3BsYXlDb21wb25lbnQsXG4gIHR5cGUgRGlzY29yZFRleHRJbnB1dENvbXBvbmVudCxcbiAgdHlwZSBEaXNjb3JkVGh1bWJuYWlsQ29tcG9uZW50LFxuICB0eXBlIERpc2NvcmRVbmZ1cmxlZE1lZGlhSXRlbSxcbiAgTWVzc2FnZUNvbXBvbmVudFR5cGVzLFxuICB0eXBlIFRleHRTdHlsZXMsXG59IGZyb20gJ0BkaXNjb3JkZW5vL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBCb3QgfSBmcm9tICcuLi8uLi9ib3QuanMnXG5pbXBvcnQgdHlwZSB7IENvbXBvbmVudCwgTWVkaWFHYWxsZXJ5SXRlbSwgVW5mdXJsZWRNZWRpYUl0ZW0gfSBmcm9tICcuLi90eXBlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUNvbXBvbmVudFRvRGlzY29yZENvbXBvbmVudChib3Q6IEJvdCwgcGF5bG9hZDogQ29tcG9uZW50KTogRGlzY29yZE1lc3NhZ2VDb21wb25lbnQge1xuICAvLyBUaGlzIHN3aXRjaCBzaG91bGQgaW5jbHVkZSBhbGwgY2FzZXNcbiAgc3dpdGNoIChwYXlsb2FkLnR5cGUpIHtcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5BY3Rpb25Sb3c6XG4gICAgICByZXR1cm4gdHJhbnNmb3JtQWN0aW9uUm93KGJvdCwgcGF5bG9hZClcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5CdXR0b246XG4gICAgICByZXR1cm4gdHJhbnNmb3JtQnV0dG9uQ29tcG9uZW50KGJvdCwgcGF5bG9hZClcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5Db250YWluZXI6XG4gICAgICByZXR1cm4gdHJhbnNmb3JtQ29udGFpbmVyQ29tcG9uZW50KGJvdCwgcGF5bG9hZClcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5UZXh0SW5wdXQ6XG4gICAgICByZXR1cm4gdHJhbnNmb3JtSW5wdXRUZXh0Q29tcG9uZW50KGJvdCwgcGF5bG9hZClcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5TdHJpbmdTZWxlY3Q6XG4gICAgY2FzZSBNZXNzYWdlQ29tcG9uZW50VHlwZXMuQ2hhbm5lbFNlbGVjdDpcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5Sb2xlU2VsZWN0OlxuICAgIGNhc2UgTWVzc2FnZUNvbXBvbmVudFR5cGVzLlVzZXJTZWxlY3Q6XG4gICAgY2FzZSBNZXNzYWdlQ29tcG9uZW50VHlwZXMuTWVudGlvbmFibGVTZWxlY3Q6XG4gICAgICByZXR1cm4gdHJhbnNmb3JtU2VsZWN0TWVudUNvbXBvbmVudChib3QsIHBheWxvYWQpXG4gICAgY2FzZSBNZXNzYWdlQ29tcG9uZW50VHlwZXMuU2VjdGlvbjpcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1TZWN0aW9uQ29tcG9uZW50KGJvdCwgcGF5bG9hZClcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5GaWxlOlxuICAgICAgcmV0dXJuIHRyYW5zZm9ybUZpbGVDb21wb25lbnQoYm90LCBwYXlsb2FkKVxuICAgIGNhc2UgTWVzc2FnZUNvbXBvbmVudFR5cGVzLk1lZGlhR2FsbGVyeTpcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1NZWRpYUdhbGxlcnlDb21wb25lbnQoYm90LCBwYXlsb2FkKVxuICAgIGNhc2UgTWVzc2FnZUNvbXBvbmVudFR5cGVzLlRodW1ibmFpbDpcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1UaHVtYm5haWxDb21wb25lbnQoYm90LCBwYXlsb2FkKVxuICAgIGNhc2UgTWVzc2FnZUNvbXBvbmVudFR5cGVzLlNlcGFyYXRvcjpcbiAgICBjYXNlIE1lc3NhZ2VDb21wb25lbnRUeXBlcy5UZXh0RGlzcGxheTpcbiAgICAgIC8vIEFzIG9mIG5vdyB0aGV5IGFyZSBjb21wYXRpYmxlXG4gICAgICByZXR1cm4gcGF5bG9hZCBhcyBEaXNjb3JkTWVzc2FnZUNvbXBvbmVudFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1VbmZ1cmxlZE1lZGlhSXRlbVRvRGlzY29yZFVuZnVybGVkTWVkaWFJdGVtKGJvdDogQm90LCBwYXlsb2FkOiBVbmZ1cmxlZE1lZGlhSXRlbSk6IERpc2NvcmRVbmZ1cmxlZE1lZGlhSXRlbSB7XG4gIHJldHVybiB7XG4gICAgdXJsOiBwYXlsb2FkLnVybCxcbiAgICBwcm94eV91cmw6IHBheWxvYWQucHJveHlVcmwsXG4gICAgaGVpZ2h0OiBwYXlsb2FkLmhlaWdodCxcbiAgICB3aWR0aDogcGF5bG9hZC53aWR0aCxcbiAgICBjb250ZW50X3R5cGU6IHBheWxvYWQuY29udGVudFR5cGUsXG4gICAgYXR0YWNobWVudF9pZDogcGF5bG9hZC5hdHRhY2htZW50SWQgPyBib3QudHJhbnNmb3JtZXJzLnJldmVyc2Uuc25vd2ZsYWtlKHBheWxvYWQuYXR0YWNobWVudElkKSA6IHVuZGVmaW5lZCxcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWVkaWFHYWxsZXJ5SXRlbVRvRGlzY29yZE1lZGlhR2FsbGVyeUl0ZW0oYm90OiBCb3QsIHBheWxvYWQ6IE1lZGlhR2FsbGVyeUl0ZW0pOiBEaXNjb3JkTWVkaWFHYWxsZXJ5SXRlbSB7XG4gIHJldHVybiB7XG4gICAgbWVkaWE6IGJvdC50cmFuc2Zvcm1lcnMucmV2ZXJzZS51bmZ1cmxlZE1lZGlhSXRlbShib3QsIHBheWxvYWQubWVkaWEpLFxuICAgIGRlc2NyaXB0aW9uOiBwYXlsb2FkLmRlc2NyaXB0aW9uLFxuICAgIHNwb2lsZXI6IHBheWxvYWQuc3BvaWxlcixcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1BY3Rpb25Sb3coYm90OiBCb3QsIHBheWxvYWQ6IENvbXBvbmVudCk6IERpc2NvcmRBY3Rpb25Sb3cge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IE1lc3NhZ2VDb21wb25lbnRUeXBlcy5BY3Rpb25Sb3csXG4gICAgaWQ6IHBheWxvYWQuaWQsXG4gICAgLy8gVGhlIGFjdGlvblJvdy5jb21wb25lbnRzIHR5cGUgaXMga2luZGEgYW5ub3lpbmcsIHNvIHdlIG5lZWQgYSBjYXN0IGZvciB0aGlzXG4gICAgY29tcG9uZW50czogKHBheWxvYWQuY29tcG9uZW50cz8ubWFwKChjb21wb25lbnQpID0+IGJvdC50cmFuc2Zvcm1lcnMucmV2ZXJzZS5jb21wb25lbnQoYm90LCBjb21wb25lbnQpKSA/PyBbXSkgYXMgRGlzY29yZEFjdGlvblJvd1snY29tcG9uZW50cyddLFxuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUNvbnRhaW5lckNvbXBvbmVudChib3Q6IEJvdCwgcGF5bG9hZDogQ29tcG9uZW50KTogRGlzY29yZENvbnRhaW5lckNvbXBvbmVudCB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogTWVzc2FnZUNvbXBvbmVudFR5cGVzLkNvbnRhaW5lcixcbiAgICBpZDogcGF5bG9hZC5pZCxcbiAgICBhY2NlbnRfY29sb3I6IHBheWxvYWQuYWNjZW50Q29sb3IsXG4gICAgc3BvaWxlcjogcGF5bG9hZC5zcG9pbGVyLFxuICAgIGNvbXBvbmVudHM6IChwYXlsb2FkLmNvbXBvbmVudHM/Lm1hcCgoY29tcG9uZW50KSA9PiBib3QudHJhbnNmb3JtZXJzLnJldmVyc2UuY29tcG9uZW50KGJvdCwgY29tcG9uZW50KSkgPz9cbiAgICAgIFtdKSBhcyBEaXNjb3JkQ29udGFpbmVyQ29tcG9uZW50Wydjb21wb25lbnRzJ10sXG4gIH1cbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtQnV0dG9uQ29tcG9uZW50KGJvdDogQm90LCBwYXlsb2FkOiBDb21wb25lbnQpOiBEaXNjb3JkQnV0dG9uQ29tcG9uZW50IHtcbiAgLy8gU2luY2UgQ29tcG9uZW50IGlzIGEgbWVyZ2Ugb2YgYWxsIGNvbXBvbmVudHMsIHNvbWUgY2FzdHMgYXJlIG5lY2Vzc2FyeVxuICByZXR1cm4ge1xuICAgIHR5cGU6IE1lc3NhZ2VDb21wb25lbnRUeXBlcy5CdXR0b24sXG4gICAgaWQ6IHBheWxvYWQuaWQsXG4gICAgc3R5bGU6IHBheWxvYWQuc3R5bGUgYXMgQnV0dG9uU3R5bGVzLFxuICAgIGN1c3RvbV9pZDogcGF5bG9hZC5jdXN0b21JZCxcbiAgICBkaXNhYmxlZDogcGF5bG9hZC5kaXNhYmxlZCxcbiAgICBlbW9qaTogcGF5bG9hZC5lbW9qaVxuICAgICAgPyB7XG4gICAgICAgICAgaWQ6IHBheWxvYWQuZW1vamkuaWQgPyBib3QudHJhbnNmb3JtZXJzLnJldmVyc2Uuc25vd2ZsYWtlKHBheWxvYWQuZW1vamkuaWQpIDogbnVsbCxcbiAgICAgICAgICBuYW1lOiBwYXlsb2FkLmVtb2ppLm5hbWUgPz8gbnVsbCxcbiAgICAgICAgICBhbmltYXRlZDogcGF5bG9hZC5lbW9qaS5hbmltYXRlZCxcbiAgICAgICAgfVxuICAgICAgOiB1bmRlZmluZWQsXG4gICAgbGFiZWw6IHBheWxvYWQubGFiZWwsXG4gICAgdXJsOiBwYXlsb2FkLnVybCxcbiAgICBza3VfaWQ6IHBheWxvYWQuc2t1SWQgPyBib3QudHJhbnNmb3JtZXJzLnJldmVyc2Uuc25vd2ZsYWtlKHBheWxvYWQuc2t1SWQpIDogdW5kZWZpbmVkLFxuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUlucHV0VGV4dENvbXBvbmVudChfYm90OiBCb3QsIHBheWxvYWQ6IENvbXBvbmVudCk6IERpc2NvcmRUZXh0SW5wdXRDb21wb25lbnQge1xuICAvLyBTaW5jZSBDb21wb25lbnQgaXMgYSBtZXJnZSBvZiBhbGwgY29tcG9uZW50cywgc29tZSBjYXN0cyBhcmUgbmVjZXNzYXJ5XG4gIHJldHVybiB7XG4gICAgdHlwZTogTWVzc2FnZUNvbXBvbmVudFR5cGVzLlRleHRJbnB1dCxcbiAgICBpZDogcGF5bG9hZC5pZCxcbiAgICBzdHlsZTogcGF5bG9hZC5zdHlsZSBhcyBUZXh0U3R5bGVzLFxuICAgIGN1c3RvbV9pZDogcGF5bG9hZC5jdXN0b21JZCEsXG4gICAgbGFiZWw6IHBheWxvYWQubGFiZWwhLFxuICAgIHZhbHVlOiBwYXlsb2FkLnZhbHVlLFxuICAgIG1heF9sZW5ndGg6IHBheWxvYWQubWF4TGVuZ3RoLFxuICAgIG1pbl9sZW5ndGg6IHBheWxvYWQubWluTGVuZ3RoLFxuICAgIHBsYWNlaG9sZGVyOiBwYXlsb2FkLnBsYWNlaG9sZGVyLFxuICAgIHJlcXVpcmVkOiBwYXlsb2FkLnJlcXVpcmVkLFxuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNlbGVjdE1lbnVDb21wb25lbnQoYm90OiBCb3QsIHBheWxvYWQ6IENvbXBvbmVudCk6IERpc2NvcmRTZWxlY3RNZW51Q29tcG9uZW50IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBwYXlsb2FkLnR5cGUgYXMgRGlzY29yZFNlbGVjdE1lbnVDb21wb25lbnRbJ3R5cGUnXSxcbiAgICBpZDogcGF5bG9hZC5pZCxcbiAgICBjdXN0b21faWQ6IHBheWxvYWQuY3VzdG9tSWQhLFxuICAgIGNoYW5uZWxfdHlwZXM6IHBheWxvYWQuY2hhbm5lbFR5cGVzLFxuICAgIGRlZmF1bHRfdmFsdWVzOiBwYXlsb2FkLmRlZmF1bHRWYWx1ZXM/Lm1hcCgoZGVmYXVsdFZhbHVlKSA9PiAoe1xuICAgICAgaWQ6IGJvdC50cmFuc2Zvcm1lcnMucmV2ZXJzZS5zbm93Zmxha2UoZGVmYXVsdFZhbHVlLmlkKSxcbiAgICAgIHR5cGU6IGRlZmF1bHRWYWx1ZS50eXBlLFxuICAgIH0pKSxcbiAgICBkaXNhYmxlZDogcGF5bG9hZC5kaXNhYmxlZCxcbiAgICBtYXhfdmFsdWVzOiBwYXlsb2FkLm1heFZhbHVlcyxcbiAgICBtaW5fdmFsdWVzOiBwYXlsb2FkLm1pblZhbHVlcyxcbiAgICBvcHRpb25zOiBwYXlsb2FkLm9wdGlvbnM/Lm1hcCgob3B0aW9uKSA9PiAoe1xuICAgICAgbGFiZWw6IG9wdGlvbi5sYWJlbCxcbiAgICAgIHZhbHVlOiBvcHRpb24udmFsdWUsXG4gICAgICBkZXNjcmlwdGlvbjogb3B0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgZW1vamk6IG9wdGlvbi5lbW9qaVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGlkOiBvcHRpb24uZW1vamkuaWQgPyBib3QudHJhbnNmb3JtZXJzLnJldmVyc2Uuc25vd2ZsYWtlKG9wdGlvbi5lbW9qaS5pZCkgOiBudWxsLFxuICAgICAgICAgICAgbmFtZTogb3B0aW9uLmVtb2ppLm5hbWUgPz8gbnVsbCxcbiAgICAgICAgICAgIGFuaW1hdGVkOiBvcHRpb24uZW1vamkuYW5pbWF0ZWQsXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGRlZmF1bHQ6IG9wdGlvbi5kZWZhdWx0LFxuICAgIH0pKSxcbiAgICBwbGFjZWhvbGRlcjogcGF5bG9hZC5wbGFjZWhvbGRlcixcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TZWN0aW9uQ29tcG9uZW50KGJvdDogQm90LCBwYXlsb2FkOiBDb21wb25lbnQpOiBEaXNjb3JkU2VjdGlvbkNvbXBvbmVudCB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogTWVzc2FnZUNvbXBvbmVudFR5cGVzLlNlY3Rpb24sXG4gICAgaWQ6IHBheWxvYWQuaWQsXG4gICAgY29tcG9uZW50czogcGF5bG9hZC5jb21wb25lbnRzPy5tYXAoKGNvbXBvbmVudCkgPT4gYm90LnRyYW5zZm9ybWVycy5yZXZlcnNlLmNvbXBvbmVudChib3QsIGNvbXBvbmVudCkpIGFzIERpc2NvcmRUZXh0RGlzcGxheUNvbXBvbmVudFtdLFxuICAgIGFjY2Vzc29yeTogKHBheWxvYWQuYWNjZXNzb3J5ID8gYm90LnRyYW5zZm9ybWVycy5yZXZlcnNlLmNvbXBvbmVudChib3QsIHBheWxvYWQuYWNjZXNzb3J5KSA6IHVuZGVmaW5lZCkgYXMgRGlzY29yZFNlY3Rpb25Db21wb25lbnRbJ2FjY2Vzc29yeSddLFxuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUZpbGVDb21wb25lbnQoYm90OiBCb3QsIHBheWxvYWQ6IENvbXBvbmVudCk6IERpc2NvcmRGaWxlQ29tcG9uZW50IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBNZXNzYWdlQ29tcG9uZW50VHlwZXMuRmlsZSxcbiAgICBpZDogcGF5bG9hZC5pZCxcbiAgICBmaWxlOiBib3QudHJhbnNmb3JtZXJzLnJldmVyc2UudW5mdXJsZWRNZWRpYUl0ZW0oYm90LCBwYXlsb2FkLmZpbGUhKSxcbiAgICBzcG9pbGVyOiBwYXlsb2FkLnNwb2lsZXIsXG4gICAgbmFtZTogcGF5bG9hZC5uYW1lISxcbiAgICBzaXplOiBwYXlsb2FkLnNpemUhLFxuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybU1lZGlhR2FsbGVyeUNvbXBvbmVudChib3Q6IEJvdCwgcGF5bG9hZDogQ29tcG9uZW50KTogRGlzY29yZE1lZGlhR2FsbGVyeUNvbXBvbmVudCB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogTWVzc2FnZUNvbXBvbmVudFR5cGVzLk1lZGlhR2FsbGVyeSxcbiAgICBpZDogcGF5bG9hZC5pZCxcbiAgICBpdGVtczogcGF5bG9hZC5pdGVtcz8ubWFwKChpdGVtKSA9PiBib3QudHJhbnNmb3JtZXJzLnJldmVyc2UubWVkaWFHYWxsZXJ5SXRlbShib3QsIGl0ZW0pKSA/PyBbXSxcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UaHVtYm5haWxDb21wb25lbnQoYm90OiBCb3QsIHBheWxvYWQ6IENvbXBvbmVudCk6IERpc2NvcmRUaHVtYm5haWxDb21wb25lbnQge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IE1lc3NhZ2VDb21wb25lbnRUeXBlcy5UaHVtYm5haWwsXG4gICAgaWQ6IHBheWxvYWQuaWQsXG4gICAgbWVkaWE6IGJvdC50cmFuc2Zvcm1lcnMucmV2ZXJzZS51bmZ1cmxlZE1lZGlhSXRlbShib3QsIHBheWxvYWQubWVkaWEhKSxcbiAgICBkZXNjcmlwdGlvbjogcGF5bG9hZC5kZXNjcmlwdGlvbixcbiAgICBzcG9pbGVyOiBwYXlsb2FkLnNwb2lsZXIsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNZXNzYWdlQ29tcG9uZW50VHlwZXMiLCJ0cmFuc2Zvcm1Db21wb25lbnRUb0Rpc2NvcmRDb21wb25lbnQiLCJib3QiLCJwYXlsb2FkIiwidHlwZSIsIkFjdGlvblJvdyIsInRyYW5zZm9ybUFjdGlvblJvdyIsIkJ1dHRvbiIsInRyYW5zZm9ybUJ1dHRvbkNvbXBvbmVudCIsIkNvbnRhaW5lciIsInRyYW5zZm9ybUNvbnRhaW5lckNvbXBvbmVudCIsIlRleHRJbnB1dCIsInRyYW5zZm9ybUlucHV0VGV4dENvbXBvbmVudCIsIlN0cmluZ1NlbGVjdCIsIkNoYW5uZWxTZWxlY3QiLCJSb2xlU2VsZWN0IiwiVXNlclNlbGVjdCIsIk1lbnRpb25hYmxlU2VsZWN0IiwidHJhbnNmb3JtU2VsZWN0TWVudUNvbXBvbmVudCIsIlNlY3Rpb24iLCJ0cmFuc2Zvcm1TZWN0aW9uQ29tcG9uZW50IiwiRmlsZSIsInRyYW5zZm9ybUZpbGVDb21wb25lbnQiLCJNZWRpYUdhbGxlcnkiLCJ0cmFuc2Zvcm1NZWRpYUdhbGxlcnlDb21wb25lbnQiLCJUaHVtYm5haWwiLCJ0cmFuc2Zvcm1UaHVtYm5haWxDb21wb25lbnQiLCJTZXBhcmF0b3IiLCJUZXh0RGlzcGxheSIsInRyYW5zZm9ybVVuZnVybGVkTWVkaWFJdGVtVG9EaXNjb3JkVW5mdXJsZWRNZWRpYUl0ZW0iLCJ1cmwiLCJwcm94eV91cmwiLCJwcm94eVVybCIsImhlaWdodCIsIndpZHRoIiwiY29udGVudF90eXBlIiwiY29udGVudFR5cGUiLCJhdHRhY2htZW50X2lkIiwiYXR0YWNobWVudElkIiwidHJhbnNmb3JtZXJzIiwicmV2ZXJzZSIsInNub3dmbGFrZSIsInVuZGVmaW5lZCIsInRyYW5zZm9ybU1lZGlhR2FsbGVyeUl0ZW1Ub0Rpc2NvcmRNZWRpYUdhbGxlcnlJdGVtIiwibWVkaWEiLCJ1bmZ1cmxlZE1lZGlhSXRlbSIsImRlc2NyaXB0aW9uIiwic3BvaWxlciIsImlkIiwiY29tcG9uZW50cyIsIm1hcCIsImNvbXBvbmVudCIsImFjY2VudF9jb2xvciIsImFjY2VudENvbG9yIiwic3R5bGUiLCJjdXN0b21faWQiLCJjdXN0b21JZCIsImRpc2FibGVkIiwiZW1vamkiLCJuYW1lIiwiYW5pbWF0ZWQiLCJsYWJlbCIsInNrdV9pZCIsInNrdUlkIiwiX2JvdCIsInZhbHVlIiwibWF4X2xlbmd0aCIsIm1heExlbmd0aCIsIm1pbl9sZW5ndGgiLCJtaW5MZW5ndGgiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiY2hhbm5lbF90eXBlcyIsImNoYW5uZWxUeXBlcyIsImRlZmF1bHRfdmFsdWVzIiwiZGVmYXVsdFZhbHVlcyIsImRlZmF1bHRWYWx1ZSIsIm1heF92YWx1ZXMiLCJtYXhWYWx1ZXMiLCJtaW5fdmFsdWVzIiwibWluVmFsdWVzIiwib3B0aW9ucyIsIm9wdGlvbiIsImRlZmF1bHQiLCJhY2Nlc3NvcnkiLCJmaWxlIiwic2l6ZSIsIml0ZW1zIiwiaXRlbSIsIm1lZGlhR2FsbGVyeUl0ZW0iXSwibWFwcGluZ3MiOiJBQUFBLFNBZUVBLHFCQUFxQixRQUVoQixvQkFBbUI7QUFJMUIsT0FBTyxTQUFTQyxxQ0FBcUNDLEdBQVEsRUFBRUMsT0FBa0I7SUFDL0UsdUNBQXVDO0lBQ3ZDLE9BQVFBLFFBQVFDLElBQUk7UUFDbEIsS0FBS0osc0JBQXNCSyxTQUFTO1lBQ2xDLE9BQU9DLG1CQUFtQkosS0FBS0M7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