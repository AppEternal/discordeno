import { calculatePermissions, iconHashToBigInt } from '@discordeno/utils';
import { ChannelToggles } from './toggles/channel.js';
import { Permissions } from './toggles/Permissions.js';
const Mask = (1n << 64n) - 1n;
export function packOverwrites(allow, deny, id, type) {
    return pack64(allow, 0) | pack64(deny, 1) | pack64(id, 2) | pack64(type, 3);
}
function unpack64(v, shift) {
    return v >> BigInt(shift * 64) & Mask;
}
function pack64(v, shift) {
    const b = BigInt(v);
    if (b < 0 || b > Mask) throw new Error('should have been a 64 bit unsigned integer: ' + v.toString());
    return b << BigInt(shift * 64);
}
export function separateOverwrites(v) {
    return [
        Number(unpack64(v, 3)),
        unpack64(v, 2),
        unpack64(v, 0),
        unpack64(v, 1)
    ];
}
export const baseChannel = {
    // This allows typescript to still check for type errors on functions below
    ...undefined,
    get archived () {
        return !!this.toggles?.archived;
    },
    get invitable () {
        return !!this.toggles?.invitable;
    },
    get locked () {
        return !!this.toggles?.locked;
    },
    get nsfw () {
        return !!this.toggles?.nsfw;
    },
    get newlyCreated () {
        return !!this.toggles?.newlyCreated;
    },
    get managed () {
        return !!this.toggles?.managed;
    },
    get permissionOverwrites () {
        return this.internalOverwrites?.map((overwrite)=>{
            const [type, id, allow, deny] = separateOverwrites(overwrite);
            return {
                type,
                id,
                allow: calculatePermissions(allow),
                deny: calculatePermissions(deny)
            };
        }) ?? [];
    },
    get threadMetadata () {
        return {
            archiveTimestamp: this.internalThreadMetadata?.archiveTimestamp,
            createTimestamp: this.internalThreadMetadata?.createTimestamp,
            autoArchiveDuration: this.internalThreadMetadata?.autoArchiveDuration,
            locked: !!this.toggles?.locked,
            invitable: !!this.toggles?.invitable,
            archived: !!this.toggles?.archived
        };
    }
};
export function transformChannel(bot, payload, extra) {
    const channel = Object.create(baseChannel);
    const props = bot.transformers.desiredProperties.channel;
    channel.toggles = new ChannelToggles(payload);
    if (props.id && payload.id) channel.id = bot.transformers.snowflake(payload.id);
    if (props.guildId && (extra?.guildId ?? payload.guild_id)) channel.guildId = extra?.guildId ? bot.transformers.snowflake(extra.guildId) : bot.transformers.snowflake(payload.guild_id);
    if (props.type) channel.type = payload.type;
    if (props.position) channel.position = payload.position;
    if (props.name && payload.name) channel.name = payload.name;
    if (props.topic && payload.topic) channel.topic = payload.topic;
    if (props.lastMessageId && payload.last_message_id) channel.lastMessageId = bot.transformers.snowflake(payload.last_message_id);
    if (props.bitrate && payload.bitrate) channel.bitrate = payload.bitrate;
    if (props.userLimit) channel.userLimit = payload.user_limit;
    if (props.rateLimitPerUser) channel.rateLimitPerUser = payload.rate_limit_per_user;
    if (props.ownerId && payload.owner_id) channel.ownerId = bot.transformers.snowflake(payload.owner_id);
    if (props.lastPinTimestamp && payload.last_pin_timestamp) channel.lastPinTimestamp = Date.parse(payload.last_pin_timestamp);
    if (props.rtcRegion && payload.rtc_region) channel.rtcRegion = payload.rtc_region;
    if (props.videoQualityMode && payload.video_quality_mode) channel.videoQualityMode = payload.video_quality_mode;
    if (props.messageCount) channel.messageCount = payload.message_count;
    if (props.memberCount) channel.memberCount = payload.member_count;
    if (props.threadMetadata) {
        channel.internalThreadMetadata = {};
        if (payload.thread_metadata?.archive_timestamp) channel.internalThreadMetadata.archiveTimestamp = Date.parse(payload.thread_metadata.archive_timestamp);
        if (payload.thread_metadata?.create_timestamp) channel.internalThreadMetadata.createTimestamp = Date.parse(payload.thread_metadata.create_timestamp);
        if (payload.thread_metadata?.auto_archive_duration) channel.internalThreadMetadata.autoArchiveDuration = payload.thread_metadata.auto_archive_duration;
    }
    if (props.defaultAutoArchiveDuration && payload.default_auto_archive_duration) channel.defaultAutoArchiveDuration = payload.default_auto_archive_duration;
    if (props.permissions && payload.permissions) channel.permissions = new Permissions(payload.permissions);
    if (props.flags) channel.flags = payload.flags;
    if (props.permissionOverwrites && payload.permission_overwrites) channel.internalOverwrites = payload.permission_overwrites.map((o)=>packOverwrites(o.allow ?? '0', o.deny ?? '0', o.id, o.type));
    if (props.parentId && payload.parent_id) channel.parentId = bot.transformers.snowflake(payload.parent_id);
    if (props.recipients && payload.recipients) channel.recipients = payload.recipients.map((u)=>bot.transformers.user(bot, u));
    if (props.icon && payload.icon) channel.icon = iconHashToBigInt(payload.icon);
    if (props.applicationId && payload.application_id) channel.applicationId = bot.transformers.snowflake(payload.application_id);
    if (props.member && payload.member) channel.member = bot.transformers.threadMember(bot, payload.member, {
        guildId: extra?.guildId
    });
    if (props.totalMessageSent && payload.total_message_sent !== undefined) channel.totalMessageSent = payload.total_message_sent;
    if (props.availableTags && payload.available_tags) channel.availableTags = payload.available_tags.map((x)=>bot.transformers.forumTag(bot, x));
    if (props.appliedTags && payload.applied_tags) channel.appliedTags = payload.applied_tags.map((x)=>bot.transformers.snowflake(x));
    if (props.defaultReactionEmoji && payload.default_reaction_emoji) channel.defaultReactionEmoji = bot.transformers.defaultReactionEmoji(bot, payload.default_reaction_emoji);
    if (props.defaultThreadRateLimitPerUser && payload.default_thread_rate_limit_per_user) channel.defaultThreadRateLimitPerUser = payload.default_thread_rate_limit_per_user;
    if (props.defaultSortOrder && payload.default_sort_order !== undefined) channel.defaultSortOrder = payload.default_sort_order;
    if (props.defaultForumLayout && payload.default_forum_layout !== undefined) channel.defaultForumLayout = payload.default_forum_layout;
    return bot.transformers.customizers.channel(bot, payload, channel, {
        guildId: extra?.guildId ? bot.transformers.snowflake(extra.guildId) : undefined
    });
}
export function transformForumTag(bot, payload) {
    const props = bot.transformers.desiredProperties.forumTag;
    const forumTag = {};
    if (props.id && payload.id) forumTag.id = bot.transformers.snowflake(payload.id);
    if (props.name && payload.name) forumTag.name = payload.name;
    if (props.moderated && payload.moderated) forumTag.moderated = payload.moderated;
    if (props.emojiId && payload.emoji_id) forumTag.emojiId = bot.transformers.snowflake(payload.emoji_id);
    if (props.emojiName && payload.emoji_name) forumTag.emojiName = payload.emoji_name;
    return bot.transformers.customizers.forumTag(bot, payload, forumTag);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvY2hhbm5lbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJpZ1N0cmluZywgRGlzY29yZENoYW5uZWwsIERpc2NvcmRGb3J1bVRhZyB9IGZyb20gJ0BkaXNjb3JkZW5vL3R5cGVzJ1xuaW1wb3J0IHsgY2FsY3VsYXRlUGVybWlzc2lvbnMsIGljb25IYXNoVG9CaWdJbnQgfSBmcm9tICdAZGlzY29yZGVuby91dGlscydcbmltcG9ydCB0eXBlIHsgQm90IH0gZnJvbSAnLi4vYm90LmpzJ1xuaW1wb3J0IHR5cGUgeyBEZXNpcmVkUHJvcGVydGllc0JlaGF2aW9yLCBTZXR1cERlc2lyZWRQcm9wcywgVHJhbnNmb3JtZXJzRGVzaXJlZFByb3BlcnRpZXMgfSBmcm9tICcuLi9kZXNpcmVkUHJvcGVydGllcy5qcydcbmltcG9ydCB7IENoYW5uZWxUb2dnbGVzIH0gZnJvbSAnLi90b2dnbGVzL2NoYW5uZWwuanMnXG5pbXBvcnQgeyBQZXJtaXNzaW9ucyB9IGZyb20gJy4vdG9nZ2xlcy9QZXJtaXNzaW9ucy5qcydcbmltcG9ydCB0eXBlIHsgQ2hhbm5lbCwgRm9ydW1UYWcgfSBmcm9tICcuL3R5cGVzLmpzJ1xuXG5jb25zdCBNYXNrID0gKDFuIDw8IDY0bikgLSAxblxuXG5leHBvcnQgZnVuY3Rpb24gcGFja092ZXJ3cml0ZXMoYWxsb3c6IHN0cmluZywgZGVueTogc3RyaW5nLCBpZDogc3RyaW5nLCB0eXBlOiBudW1iZXIpOiBiaWdpbnQge1xuICByZXR1cm4gcGFjazY0KGFsbG93LCAwKSB8IHBhY2s2NChkZW55LCAxKSB8IHBhY2s2NChpZCwgMikgfCBwYWNrNjQodHlwZSwgMylcbn1cbmZ1bmN0aW9uIHVucGFjazY0KHY6IGJpZ2ludCwgc2hpZnQ6IG51bWJlcik6IGJpZ2ludCB7XG4gIHJldHVybiAodiA+PiBCaWdJbnQoc2hpZnQgKiA2NCkpICYgTWFza1xufVxuZnVuY3Rpb24gcGFjazY0KHY6IHN0cmluZyB8IG51bWJlciwgc2hpZnQ6IG51bWJlcik6IGJpZ2ludCB7XG4gIGNvbnN0IGIgPSBCaWdJbnQodilcbiAgaWYgKGIgPCAwIHx8IGIgPiBNYXNrKSB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBoYXZlIGJlZW4gYSA2NCBiaXQgdW5zaWduZWQgaW50ZWdlcjogJyArIHYudG9TdHJpbmcoKSlcbiAgcmV0dXJuIGIgPDwgQmlnSW50KHNoaWZ0ICogNjQpXG59XG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGVPdmVyd3JpdGVzKHY6IGJpZ2ludCk6IFtudW1iZXIsIGJpZ2ludCwgYmlnaW50LCBiaWdpbnRdIHtcbiAgcmV0dXJuIFtOdW1iZXIodW5wYWNrNjQodiwgMykpLCB1bnBhY2s2NCh2LCAyKSwgdW5wYWNrNjQodiwgMCksIHVucGFjazY0KHYsIDEpXSBhcyBbbnVtYmVyLCBiaWdpbnQsIGJpZ2ludCwgYmlnaW50XVxufVxuXG5leHBvcnQgY29uc3QgYmFzZUNoYW5uZWw6IENoYW5uZWwgPSB7XG4gIC8vIFRoaXMgYWxsb3dzIHR5cGVzY3JpcHQgdG8gc3RpbGwgY2hlY2sgZm9yIHR5cGUgZXJyb3JzIG9uIGZ1bmN0aW9ucyBiZWxvd1xuICAuLi4odW5kZWZpbmVkIGFzIHVua25vd24gYXMgQ2hhbm5lbCksXG5cbiAgZ2V0IGFyY2hpdmVkKCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8uYXJjaGl2ZWRcbiAgfSxcbiAgZ2V0IGludml0YWJsZSgpIHtcbiAgICByZXR1cm4gISF0aGlzLnRvZ2dsZXM/Lmludml0YWJsZVxuICB9LFxuICBnZXQgbG9ja2VkKCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8ubG9ja2VkXG4gIH0sXG4gIGdldCBuc2Z3KCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8ubnNmd1xuICB9LFxuICBnZXQgbmV3bHlDcmVhdGVkKCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8ubmV3bHlDcmVhdGVkXG4gIH0sXG4gIGdldCBtYW5hZ2VkKCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8ubWFuYWdlZFxuICB9LFxuICBnZXQgcGVybWlzc2lvbk92ZXJ3cml0ZXMoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaW50ZXJuYWxPdmVyd3JpdGVzPy5tYXAoKG92ZXJ3cml0ZSkgPT4ge1xuICAgICAgICBjb25zdCBbdHlwZSwgaWQsIGFsbG93LCBkZW55XSA9IHNlcGFyYXRlT3ZlcndyaXRlcyhvdmVyd3JpdGUpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBhbGxvdzogY2FsY3VsYXRlUGVybWlzc2lvbnMoYWxsb3cpLFxuICAgICAgICAgIGRlbnk6IGNhbGN1bGF0ZVBlcm1pc3Npb25zKGRlbnkpLFxuICAgICAgICB9XG4gICAgICB9KSA/PyBbXVxuICAgIClcbiAgfSxcbiAgZ2V0IHRocmVhZE1ldGFkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcmNoaXZlVGltZXN0YW1wOiB0aGlzLmludGVybmFsVGhyZWFkTWV0YWRhdGE/LmFyY2hpdmVUaW1lc3RhbXAsXG4gICAgICBjcmVhdGVUaW1lc3RhbXA6IHRoaXMuaW50ZXJuYWxUaHJlYWRNZXRhZGF0YT8uY3JlYXRlVGltZXN0YW1wLFxuICAgICAgYXV0b0FyY2hpdmVEdXJhdGlvbjogdGhpcy5pbnRlcm5hbFRocmVhZE1ldGFkYXRhPy5hdXRvQXJjaGl2ZUR1cmF0aW9uLFxuICAgICAgbG9ja2VkOiAhIXRoaXMudG9nZ2xlcz8ubG9ja2VkLFxuICAgICAgaW52aXRhYmxlOiAhIXRoaXMudG9nZ2xlcz8uaW52aXRhYmxlLFxuICAgICAgYXJjaGl2ZWQ6ICEhdGhpcy50b2dnbGVzPy5hcmNoaXZlZCxcbiAgICB9XG4gIH0sXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1DaGFubmVsKGJvdDogQm90LCBwYXlsb2FkOiBEaXNjb3JkQ2hhbm5lbCwgZXh0cmE/OiB7IGd1aWxkSWQ/OiBCaWdTdHJpbmcgfSkge1xuICBjb25zdCBjaGFubmVsID0gT2JqZWN0LmNyZWF0ZShiYXNlQ2hhbm5lbCkgYXMgU2V0dXBEZXNpcmVkUHJvcHM8Q2hhbm5lbCwgVHJhbnNmb3JtZXJzRGVzaXJlZFByb3BlcnRpZXMsIERlc2lyZWRQcm9wZXJ0aWVzQmVoYXZpb3I+XG4gIGNvbnN0IHByb3BzID0gYm90LnRyYW5zZm9ybWVycy5kZXNpcmVkUHJvcGVydGllcy5jaGFubmVsXG4gIGNoYW5uZWwudG9nZ2xlcyA9IG5ldyBDaGFubmVsVG9nZ2xlcyhwYXlsb2FkKVxuXG4gIGlmIChwcm9wcy5pZCAmJiBwYXlsb2FkLmlkKSBjaGFubmVsLmlkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5pZClcbiAgaWYgKHByb3BzLmd1aWxkSWQgJiYgKGV4dHJhPy5ndWlsZElkID8/IHBheWxvYWQuZ3VpbGRfaWQpKVxuICAgIGNoYW5uZWwuZ3VpbGRJZCA9IGV4dHJhPy5ndWlsZElkID8gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UoZXh0cmEuZ3VpbGRJZCkgOiBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmd1aWxkX2lkISlcbiAgaWYgKHByb3BzLnR5cGUpIGNoYW5uZWwudHlwZSA9IHBheWxvYWQudHlwZVxuICBpZiAocHJvcHMucG9zaXRpb24pIGNoYW5uZWwucG9zaXRpb24gPSBwYXlsb2FkLnBvc2l0aW9uXG4gIGlmIChwcm9wcy5uYW1lICYmIHBheWxvYWQubmFtZSkgY2hhbm5lbC5uYW1lID0gcGF5bG9hZC5uYW1lXG4gIGlmIChwcm9wcy50b3BpYyAmJiBwYXlsb2FkLnRvcGljKSBjaGFubmVsLnRvcGljID0gcGF5bG9hZC50b3BpY1xuICBpZiAocHJvcHMubGFzdE1lc3NhZ2VJZCAmJiBwYXlsb2FkLmxhc3RfbWVzc2FnZV9pZCkgY2hhbm5lbC5sYXN0TWVzc2FnZUlkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5sYXN0X21lc3NhZ2VfaWQpXG4gIGlmIChwcm9wcy5iaXRyYXRlICYmIHBheWxvYWQuYml0cmF0ZSkgY2hhbm5lbC5iaXRyYXRlID0gcGF5bG9hZC5iaXRyYXRlXG4gIGlmIChwcm9wcy51c2VyTGltaXQpIGNoYW5uZWwudXNlckxpbWl0ID0gcGF5bG9hZC51c2VyX2xpbWl0XG4gIGlmIChwcm9wcy5yYXRlTGltaXRQZXJVc2VyKSBjaGFubmVsLnJhdGVMaW1pdFBlclVzZXIgPSBwYXlsb2FkLnJhdGVfbGltaXRfcGVyX3VzZXJcbiAgaWYgKHByb3BzLm93bmVySWQgJiYgcGF5bG9hZC5vd25lcl9pZCkgY2hhbm5lbC5vd25lcklkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5vd25lcl9pZClcbiAgaWYgKHByb3BzLmxhc3RQaW5UaW1lc3RhbXAgJiYgcGF5bG9hZC5sYXN0X3Bpbl90aW1lc3RhbXApIGNoYW5uZWwubGFzdFBpblRpbWVzdGFtcCA9IERhdGUucGFyc2UocGF5bG9hZC5sYXN0X3Bpbl90aW1lc3RhbXApXG4gIGlmIChwcm9wcy5ydGNSZWdpb24gJiYgcGF5bG9hZC5ydGNfcmVnaW9uKSBjaGFubmVsLnJ0Y1JlZ2lvbiA9IHBheWxvYWQucnRjX3JlZ2lvblxuICBpZiAocHJvcHMudmlkZW9RdWFsaXR5TW9kZSAmJiBwYXlsb2FkLnZpZGVvX3F1YWxpdHlfbW9kZSkgY2hhbm5lbC52aWRlb1F1YWxpdHlNb2RlID0gcGF5bG9hZC52aWRlb19xdWFsaXR5X21vZGVcbiAgaWYgKHByb3BzLm1lc3NhZ2VDb3VudCkgY2hhbm5lbC5tZXNzYWdlQ291bnQgPSBwYXlsb2FkLm1lc3NhZ2VfY291bnRcbiAgaWYgKHByb3BzLm1lbWJlckNvdW50KSBjaGFubmVsLm1lbWJlckNvdW50ID0gcGF5bG9hZC5tZW1iZXJfY291bnRcbiAgaWYgKHByb3BzLnRocmVhZE1ldGFkYXRhKSB7XG4gICAgY2hhbm5lbC5pbnRlcm5hbFRocmVhZE1ldGFkYXRhID0ge30gYXMgTm9uTnVsbGFibGU8Q2hhbm5lbFsnaW50ZXJuYWxUaHJlYWRNZXRhZGF0YSddPlxuICAgIGlmIChwYXlsb2FkLnRocmVhZF9tZXRhZGF0YT8uYXJjaGl2ZV90aW1lc3RhbXApXG4gICAgICBjaGFubmVsLmludGVybmFsVGhyZWFkTWV0YWRhdGEuYXJjaGl2ZVRpbWVzdGFtcCA9IERhdGUucGFyc2UocGF5bG9hZC50aHJlYWRfbWV0YWRhdGEuYXJjaGl2ZV90aW1lc3RhbXApXG4gICAgaWYgKHBheWxvYWQudGhyZWFkX21ldGFkYXRhPy5jcmVhdGVfdGltZXN0YW1wKVxuICAgICAgY2hhbm5lbC5pbnRlcm5hbFRocmVhZE1ldGFkYXRhLmNyZWF0ZVRpbWVzdGFtcCA9IERhdGUucGFyc2UocGF5bG9hZC50aHJlYWRfbWV0YWRhdGEuY3JlYXRlX3RpbWVzdGFtcClcbiAgICBpZiAocGF5bG9hZC50aHJlYWRfbWV0YWRhdGE/LmF1dG9fYXJjaGl2ZV9kdXJhdGlvbilcbiAgICAgIGNoYW5uZWwuaW50ZXJuYWxUaHJlYWRNZXRhZGF0YS5hdXRvQXJjaGl2ZUR1cmF0aW9uID0gcGF5bG9hZC50aHJlYWRfbWV0YWRhdGEuYXV0b19hcmNoaXZlX2R1cmF0aW9uXG4gIH1cbiAgaWYgKHByb3BzLmRlZmF1bHRBdXRvQXJjaGl2ZUR1cmF0aW9uICYmIHBheWxvYWQuZGVmYXVsdF9hdXRvX2FyY2hpdmVfZHVyYXRpb24pXG4gICAgY2hhbm5lbC5kZWZhdWx0QXV0b0FyY2hpdmVEdXJhdGlvbiA9IHBheWxvYWQuZGVmYXVsdF9hdXRvX2FyY2hpdmVfZHVyYXRpb25cbiAgaWYgKHByb3BzLnBlcm1pc3Npb25zICYmIHBheWxvYWQucGVybWlzc2lvbnMpIGNoYW5uZWwucGVybWlzc2lvbnMgPSBuZXcgUGVybWlzc2lvbnMocGF5bG9hZC5wZXJtaXNzaW9ucylcbiAgaWYgKHByb3BzLmZsYWdzKSBjaGFubmVsLmZsYWdzID0gcGF5bG9hZC5mbGFnc1xuICBpZiAocHJvcHMucGVybWlzc2lvbk92ZXJ3cml0ZXMgJiYgcGF5bG9hZC5wZXJtaXNzaW9uX292ZXJ3cml0ZXMpXG4gICAgY2hhbm5lbC5pbnRlcm5hbE92ZXJ3cml0ZXMgPSBwYXlsb2FkLnBlcm1pc3Npb25fb3ZlcndyaXRlcy5tYXAoKG8pID0+IHBhY2tPdmVyd3JpdGVzKG8uYWxsb3cgPz8gJzAnLCBvLmRlbnkgPz8gJzAnLCBvLmlkLCBvLnR5cGUpKVxuICBpZiAocHJvcHMucGFyZW50SWQgJiYgcGF5bG9hZC5wYXJlbnRfaWQpIGNoYW5uZWwucGFyZW50SWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLnBhcmVudF9pZClcbiAgaWYgKHByb3BzLnJlY2lwaWVudHMgJiYgcGF5bG9hZC5yZWNpcGllbnRzKSBjaGFubmVsLnJlY2lwaWVudHMgPSBwYXlsb2FkLnJlY2lwaWVudHMubWFwKCh1KSA9PiBib3QudHJhbnNmb3JtZXJzLnVzZXIoYm90LCB1KSlcbiAgaWYgKHByb3BzLmljb24gJiYgcGF5bG9hZC5pY29uKSBjaGFubmVsLmljb24gPSBpY29uSGFzaFRvQmlnSW50KHBheWxvYWQuaWNvbilcbiAgaWYgKHByb3BzLmFwcGxpY2F0aW9uSWQgJiYgcGF5bG9hZC5hcHBsaWNhdGlvbl9pZCkgY2hhbm5lbC5hcHBsaWNhdGlvbklkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5hcHBsaWNhdGlvbl9pZClcbiAgaWYgKHByb3BzLm1lbWJlciAmJiBwYXlsb2FkLm1lbWJlcikgY2hhbm5lbC5tZW1iZXIgPSBib3QudHJhbnNmb3JtZXJzLnRocmVhZE1lbWJlcihib3QsIHBheWxvYWQubWVtYmVyLCB7IGd1aWxkSWQ6IGV4dHJhPy5ndWlsZElkIH0pXG4gIGlmIChwcm9wcy50b3RhbE1lc3NhZ2VTZW50ICYmIHBheWxvYWQudG90YWxfbWVzc2FnZV9zZW50ICE9PSB1bmRlZmluZWQpIGNoYW5uZWwudG90YWxNZXNzYWdlU2VudCA9IHBheWxvYWQudG90YWxfbWVzc2FnZV9zZW50XG4gIGlmIChwcm9wcy5hdmFpbGFibGVUYWdzICYmIHBheWxvYWQuYXZhaWxhYmxlX3RhZ3MpIGNoYW5uZWwuYXZhaWxhYmxlVGFncyA9IHBheWxvYWQuYXZhaWxhYmxlX3RhZ3MubWFwKCh4KSA9PiBib3QudHJhbnNmb3JtZXJzLmZvcnVtVGFnKGJvdCwgeCkpXG4gIGlmIChwcm9wcy5hcHBsaWVkVGFncyAmJiBwYXlsb2FkLmFwcGxpZWRfdGFncykgY2hhbm5lbC5hcHBsaWVkVGFncyA9IHBheWxvYWQuYXBwbGllZF90YWdzLm1hcCgoeCkgPT4gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UoeCkpXG4gIGlmIChwcm9wcy5kZWZhdWx0UmVhY3Rpb25FbW9qaSAmJiBwYXlsb2FkLmRlZmF1bHRfcmVhY3Rpb25fZW1vamkpXG4gICAgY2hhbm5lbC5kZWZhdWx0UmVhY3Rpb25FbW9qaSA9IGJvdC50cmFuc2Zvcm1lcnMuZGVmYXVsdFJlYWN0aW9uRW1vamkoYm90LCBwYXlsb2FkLmRlZmF1bHRfcmVhY3Rpb25fZW1vamkpXG4gIGlmIChwcm9wcy5kZWZhdWx0VGhyZWFkUmF0ZUxpbWl0UGVyVXNlciAmJiBwYXlsb2FkLmRlZmF1bHRfdGhyZWFkX3JhdGVfbGltaXRfcGVyX3VzZXIpXG4gICAgY2hhbm5lbC5kZWZhdWx0VGhyZWFkUmF0ZUxpbWl0UGVyVXNlciA9IHBheWxvYWQuZGVmYXVsdF90aHJlYWRfcmF0ZV9saW1pdF9wZXJfdXNlclxuICBpZiAocHJvcHMuZGVmYXVsdFNvcnRPcmRlciAmJiBwYXlsb2FkLmRlZmF1bHRfc29ydF9vcmRlciAhPT0gdW5kZWZpbmVkKSBjaGFubmVsLmRlZmF1bHRTb3J0T3JkZXIgPSBwYXlsb2FkLmRlZmF1bHRfc29ydF9vcmRlclxuICBpZiAocHJvcHMuZGVmYXVsdEZvcnVtTGF5b3V0ICYmIHBheWxvYWQuZGVmYXVsdF9mb3J1bV9sYXlvdXQgIT09IHVuZGVmaW5lZCkgY2hhbm5lbC5kZWZhdWx0Rm9ydW1MYXlvdXQgPSBwYXlsb2FkLmRlZmF1bHRfZm9ydW1fbGF5b3V0XG5cbiAgcmV0dXJuIGJvdC50cmFuc2Zvcm1lcnMuY3VzdG9taXplcnMuY2hhbm5lbChib3QsIHBheWxvYWQsIGNoYW5uZWwsIHtcbiAgICBndWlsZElkOiBleHRyYT8uZ3VpbGRJZCA/IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKGV4dHJhLmd1aWxkSWQpIDogdW5kZWZpbmVkLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRm9ydW1UYWcoYm90OiBCb3QsIHBheWxvYWQ6IERpc2NvcmRGb3J1bVRhZyk6IEZvcnVtVGFnIHtcbiAgY29uc3QgcHJvcHMgPSBib3QudHJhbnNmb3JtZXJzLmRlc2lyZWRQcm9wZXJ0aWVzLmZvcnVtVGFnXG4gIGNvbnN0IGZvcnVtVGFnID0ge30gYXMgU2V0dXBEZXNpcmVkUHJvcHM8Rm9ydW1UYWcsIFRyYW5zZm9ybWVyc0Rlc2lyZWRQcm9wZXJ0aWVzLCBEZXNpcmVkUHJvcGVydGllc0JlaGF2aW9yPlxuXG4gIGlmIChwcm9wcy5pZCAmJiBwYXlsb2FkLmlkKSBmb3J1bVRhZy5pZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuaWQpXG4gIGlmIChwcm9wcy5uYW1lICYmIHBheWxvYWQubmFtZSkgZm9ydW1UYWcubmFtZSA9IHBheWxvYWQubmFtZVxuICBpZiAocHJvcHMubW9kZXJhdGVkICYmIHBheWxvYWQubW9kZXJhdGVkKSBmb3J1bVRhZy5tb2RlcmF0ZWQgPSBwYXlsb2FkLm1vZGVyYXRlZFxuICBpZiAocHJvcHMuZW1vamlJZCAmJiBwYXlsb2FkLmVtb2ppX2lkKSBmb3J1bVRhZy5lbW9qaUlkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5lbW9qaV9pZClcbiAgaWYgKHByb3BzLmVtb2ppTmFtZSAmJiBwYXlsb2FkLmVtb2ppX25hbWUpIGZvcnVtVGFnLmVtb2ppTmFtZSA9IHBheWxvYWQuZW1vamlfbmFtZVxuXG4gIHJldHVybiBib3QudHJhbnNmb3JtZXJzLmN1c3RvbWl6ZXJzLmZvcnVtVGFnKGJvdCwgcGF5bG9hZCwgZm9ydW1UYWcpXG59XG4iXSwibmFtZXMiOlsiY2FsY3VsYXRlUGVybWlzc2lvbnMiLCJpY29uSGFzaFRvQmlnSW50IiwiQ2hhbm5lbFRvZ2dsZXMiLCJQZXJtaXNzaW9ucyIsIk1hc2siLCJwYWNrT3ZlcndyaXRlcyIsImFsbG93IiwiZGVueSIsImlkIiwidHlwZSIsInBhY2s2NCIsInVucGFjazY0IiwidiIsInNoaWZ0IiwiQmlnSW50IiwiYiIsIkVycm9yIiwidG9TdHJpbmciLCJzZXBhcmF0ZU92ZXJ3cml0ZXMiLCJOdW1iZXIiLCJiYXNlQ2hhbm5lbCIsInVuZGVmaW5lZCIsImFyY2hpdmVkIiwidG9nZ2xlcyIsImludml0YWJsZSIsImxvY2tlZCIsIm5zZnciLCJuZXdseUNyZWF0ZWQiLCJtYW5hZ2VkIiwicGVybWlzc2lvbk92ZXJ3cml0ZXMiLCJpbnRlcm5hbE92ZXJ3cml0ZXMiLCJtYXAiLCJvdmVyd3JpdGUiLCJ0aHJlYWRNZXRhZGF0YSIsImFyY2hpdmVUaW1lc3RhbXAiLCJpbnRlcm5hbFRocmVhZE1ldGFkYXRhIiwiY3JlYXRlVGltZXN0YW1wIiwiYXV0b0FyY2hpdmVEdXJhdGlvbiIsInRyYW5zZm9ybUNoYW5uZWwiLCJib3QiLCJwYXlsb2FkIiwiZXh0cmEiLCJjaGFubmVsIiwiT2JqZWN0IiwiY3JlYXRlIiwicHJvcHMiLCJ0cmFuc2Zvcm1lcnMiLCJkZXNpcmVkUHJvcGVydGllcyIsInNub3dmbGFrZSIsImd1aWxkSWQiLCJndWlsZF9pZCIsInBvc2l0aW9uIiwibmFtZSIsInRvcGljIiwibGFzdE1lc3NhZ2VJZCIsImxhc3RfbWVzc2FnZV9pZCIsImJpdHJhdGUiLCJ1c2VyTGltaXQiLCJ1c2VyX2xpbWl0IiwicmF0ZUxpbWl0UGVyVXNlciIsInJhdGVfbGltaXRfcGVyX3VzZXIiLCJvd25lcklkIiwib3duZXJfaWQiLCJsYXN0UGluVGltZXN0YW1wIiwibGFzdF9waW5fdGltZXN0YW1wIiwiRGF0ZSIsInBhcnNlIiwicnRjUmVnaW9uIiwicnRjX3JlZ2lvbiIsInZpZGVvUXVhbGl0eU1vZGUiLCJ2aWRlb19xdWFsaXR5X21vZGUiLCJtZXNzYWdlQ291bnQiLCJtZXNzYWdlX2NvdW50IiwibWVtYmVyQ291bnQiLCJtZW1iZXJfY291bnQiLCJ0aHJlYWRfbWV0YWRhdGEiLCJhcmNoaXZlX3RpbWVzdGFtcCIsImNyZWF0ZV90aW1lc3RhbXAiLCJhdXRvX2FyY2hpdmVfZHVyYXRpb24iLCJkZWZhdWx0QXV0b0FyY2hpdmVEdXJhdGlvbiIsImRlZmF1bHRfYXV0b19hcmNoaXZlX2R1cmF0aW9uIiwicGVybWlzc2lvbnMiLCJmbGFncyIsInBlcm1pc3Npb25fb3ZlcndyaXRlcyIsIm8iLCJwYXJlbnRJZCIsInBhcmVudF9pZCIsInJlY2lwaWVudHMiLCJ1IiwidXNlciIsImljb24iLCJhcHBsaWNhdGlvbklkIiwiYXBwbGljYXRpb25faWQiLCJtZW1iZXIiLCJ0aHJlYWRNZW1iZXIiLCJ0b3RhbE1lc3NhZ2VTZW50IiwidG90YWxfbWVzc2FnZV9zZW50IiwiYXZhaWxhYmxlVGFncyIsImF2YWlsYWJsZV90YWdzIiwieCIsImZvcnVtVGFnIiwiYXBwbGllZFRhZ3MiLCJhcHBsaWVkX3RhZ3MiLCJkZWZhdWx0UmVhY3Rpb25FbW9qaSIsImRlZmF1bHRfcmVhY3Rpb25fZW1vamkiLCJkZWZhdWx0VGhyZWFkUmF0ZUxpbWl0UGVyVXNlciIsImRlZmF1bHRfdGhyZWFkX3JhdGVfbGltaXRfcGVyX3VzZXIiLCJkZWZhdWx0U29ydE9yZGVyIiwiZGVmYXVsdF9zb3J0X29yZGVyIiwiZGVmYXVsdEZvcnVtTGF5b3V0IiwiZGVmYXVsdF9mb3J1bV9sYXlvdXQiLCJjdXN0b21pemVycyIsInRyYW5zZm9ybUZvcnVtVGFnIiwibW9kZXJhdGVkIiwiZW1vamlJZCIsImVtb2ppX2lkIiwiZW1vamlOYW1lIiwiZW1vamlfbmFtZSJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0Esb0JBQW9CLEVBQUVDLGdCQUFnQixRQUFRLG9CQUFtQjtBQUcxRSxTQUFTQyxjQUFjLFFBQVEsdUJBQXNCO0FBQ3JELFNBQVNDLFdBQVcsUUFBUSwyQkFBMEI7QUFHdEQsTUFBTUMs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