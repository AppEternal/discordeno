import { VoiceStateToggles } from './toggles/voice.js'
export function transformVoiceState(bot, payload, extra) {
  const props = bot.transformers.desiredProperties.voiceState
  const voiceState = {}
  if (props.requestToSpeakTimestamp && payload.request_to_speak_timestamp)
    voiceState.requestToSpeakTimestamp = Date.parse(payload.request_to_speak_timestamp)
  if (props.channelId && payload.channel_id) voiceState.channelId = bot.transformers.snowflake(payload.channel_id)
  if (props.guildId && extra?.guildId) voiceState.guildId = bot.transformers.snowflake(extra.guildId)
  if (props.toggles) voiceState.toggles = new VoiceStateToggles(payload)
  if (props.sessionId) voiceState.sessionId = payload.session_id
  if (props.userId && payload.user_id) voiceState.userId = bot.transformers.snowflake(payload.user_id)
  return bot.transformers.customizers.voiceState(bot, payload, voiceState, {
    guildId: extra?.guildId ? bot.transformers.snowflake(extra.guildId) : undefined,
  })
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvdm9pY2VTdGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJpZ1N0cmluZywgRGlzY29yZFZvaWNlU3RhdGUgfSBmcm9tICdAZGlzY29yZGVuby90eXBlcydcbmltcG9ydCB0eXBlIHsgQm90IH0gZnJvbSAnLi4vYm90LmpzJ1xuaW1wb3J0IHR5cGUgeyBEZXNpcmVkUHJvcGVydGllc0JlaGF2aW9yLCBTZXR1cERlc2lyZWRQcm9wcywgVHJhbnNmb3JtZXJzRGVzaXJlZFByb3BlcnRpZXMgfSBmcm9tICcuLi9kZXNpcmVkUHJvcGVydGllcy5qcydcbmltcG9ydCB7IFZvaWNlU3RhdGVUb2dnbGVzIH0gZnJvbSAnLi90b2dnbGVzL3ZvaWNlLmpzJ1xuaW1wb3J0IHR5cGUgeyBWb2ljZVN0YXRlIH0gZnJvbSAnLi90eXBlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVZvaWNlU3RhdGUoYm90OiBCb3QsIHBheWxvYWQ6IERpc2NvcmRWb2ljZVN0YXRlLCBleHRyYT86IHsgZ3VpbGRJZD86IEJpZ1N0cmluZyB9KTogVm9pY2VTdGF0ZSB7XG4gIGNvbnN0IHByb3BzID0gYm90LnRyYW5zZm9ybWVycy5kZXNpcmVkUHJvcGVydGllcy52b2ljZVN0YXRlXG4gIGNvbnN0IHZvaWNlU3RhdGUgPSB7fSBhcyBTZXR1cERlc2lyZWRQcm9wczxWb2ljZVN0YXRlLCBUcmFuc2Zvcm1lcnNEZXNpcmVkUHJvcGVydGllcywgRGVzaXJlZFByb3BlcnRpZXNCZWhhdmlvcj5cblxuICBpZiAocHJvcHMucmVxdWVzdFRvU3BlYWtUaW1lc3RhbXAgJiYgcGF5bG9hZC5yZXF1ZXN0X3RvX3NwZWFrX3RpbWVzdGFtcClcbiAgICB2b2ljZVN0YXRlLnJlcXVlc3RUb1NwZWFrVGltZXN0YW1wID0gRGF0ZS5wYXJzZShwYXlsb2FkLnJlcXVlc3RfdG9fc3BlYWtfdGltZXN0YW1wKVxuICBpZiAocHJvcHMuY2hhbm5lbElkICYmIHBheWxvYWQuY2hhbm5lbF9pZCkgdm9pY2VTdGF0ZS5jaGFubmVsSWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmNoYW5uZWxfaWQpXG4gIGlmIChwcm9wcy5ndWlsZElkICYmIGV4dHJhPy5ndWlsZElkKSB2b2ljZVN0YXRlLmd1aWxkSWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShleHRyYS5ndWlsZElkKVxuICBpZiAocHJvcHMudG9nZ2xlcykgdm9pY2VTdGF0ZS50b2dnbGVzID0gbmV3IFZvaWNlU3RhdGVUb2dnbGVzKHBheWxvYWQpXG4gIGlmIChwcm9wcy5zZXNzaW9uSWQpIHZvaWNlU3RhdGUuc2Vzc2lvbklkID0gcGF5bG9hZC5zZXNzaW9uX2lkXG4gIGlmIChwcm9wcy51c2VySWQgJiYgcGF5bG9hZC51c2VyX2lkKSB2b2ljZVN0YXRlLnVzZXJJZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQudXNlcl9pZClcblxuICByZXR1cm4gYm90LnRyYW5zZm9ybWVycy5jdXN0b21pemVycy52b2ljZVN0YXRlKGJvdCwgcGF5bG9hZCwgdm9pY2VTdGF0ZSwge1xuICAgIGd1aWxkSWQ6IGV4dHJhPy5ndWlsZElkID8gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UoZXh0cmEuZ3VpbGRJZCkgOiB1bmRlZmluZWQsXG4gIH0pXG59XG4iXSwibmFtZXMiOlsiVm9pY2VTdGF0ZVRvZ2dsZXMiLCJ0cmFuc2Zvcm1Wb2ljZVN0YXRlIiwiYm90IiwicGF5bG9hZCIsImV4dHJhIiwicHJvcHMiLCJ0cmFuc2Zvcm1lcnMiLCJkZXNpcmVkUHJvcGVydGllcyIsInZvaWNlU3RhdGUiLCJyZXF1ZXN0VG9TcGVha1RpbWVzdGFtcCIsInJlcXVlc3RfdG9fc3BlYWtfdGltZXN0YW1wIiwiRGF0ZSIsInBhcnNlIiwiY2hhbm5lbElkIiwiY2hhbm5lbF9pZCIsInNub3dmbGFrZSIsImd1aWxkSWQiLCJ0b2dnbGVzIiwic2Vzc2lvbklkIiwic2Vzc2lvbl9pZCIsInVzZXJJZCIsInVzZXJfaWQiLCJjdXN0b21pemVycyIsInVuZGVmaW5lZCJdLCJtYXBwaW5ncyI6IkFBR0EsU0FBU0EsaUJBQWlCLFFBQVEscUJBQW9CO0FBR3RELE9BQU8sU0FBU0Msb0JBQW9CQyxHQUFRLEVBQUVDLE9BQTBCLEVBQUVDLEtBQStCO0lBQ3ZHLE1BQU1DLFFBQVFILElBQUlJLFlBQVksQ0FBQ0MsaUJBQWlCLENBQUNDLFVBQVU7SUFDM0QsTUFBTUEsYUFBYSxDQUFDO0lBRXBCLElBQUlILE1BQU1JLHVCQUF1QixJQUFJTixRQUFRTywwQkFBMEIsRUFDckVGLFdBQVdDLHVCQUF1QixHQUFHRSxLQUFLQyxLQUFLLENBQUNULFFBQVFPLDBCQUEwQjtJQUNwRixJQUFJTCxNQUFNUSxTQUFTLElBQUlWLFFBQVFXLFVBQVUsRUFBRU4sV0FBV0ssU0FBUyxHQUFHWCxJQUFJSSxZQUFZLENBQUNTLFNBQVMsQ0FBQ1osUUFBUVcsVUFBVTtJQUMvRyxJQUFJVCxNQUFNVyxPQUFPLElBQUlaLE9BQU9ZLFNBQVNSLFdBQVdRLE9BQU8sR0FBR2QsSUFBSUksWUFBWSxDQUFDUyxTQUFTLENBQUNYLE1BQU1ZLE9BQU87SUFDbEcsSUFBSVgsTUFBTVksT0FBTyxFQUFFVCxXQUFXUyxPQUFPLEdBQUcsSUFBSWpCLGtCQUFrQkc7SUFDOUQsSUFBSUUsTUFBTWEsU0FBUyxFQUFFVixXQUFXVSxTQUFTLEdBQUdmLFFBQVFnQixVQUFVO0lBQzlELElBQUlkLE1BQU1lLE1BQU0sSUFBSWpCLFFBQVFrQixPQUFPLEVBQUViLFdBQVdZLE1BQU0sR0FBR2xCLElBQUlJLFlBQVksQ0FBQ1MsU0FBUyxDQUFDWixRQUFRa0IsT0FBTztJQUVuRyxPQUFPbkIsSUFBSUksWUFBWSxDQUFDZ0IsV0FBVyxDQUFDZCxVQUFVLENBQUNOLEtBQUtDLFNBQVNLLFlBQVk7UUFDdkVRLFNBQVNaLE9BQU9ZLFVBQVVkLElBQUlJLFlBQVksQ0FBQ1MsU0FBUyxDQUFDWCxNQUFNWSxPQUFPLElBQUlPO0lBQ3hFO0FBQ0YifQ==
